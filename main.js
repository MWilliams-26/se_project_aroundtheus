!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handlePreviewPicture=s,this._handleDeleteClick=i,this._handleLikeClick=r}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handlePreviewPicture(this._name,this._link)})),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)}))}setLikeClick(e){this.isLiked=e,this._updateLikeStatus()}_updateLikeStatus(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleDeleteClick(){this._element.remove(),this._element=null}generateCard(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._cardTitleEl=this._element.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button"),this._updateLikeStatus(),this._setEventListeners(),this._element}},s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}var o=class extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}};const n=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar-button"),c=(n.querySelector(".modal__close"),n.querySelector(".modal__form_edit"),document.querySelector("#profile-description-input")),d=document.querySelector("#profile-title-input"),_=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-add-card-modal")),u=document.querySelector("#profile-add-button"),h=(_.querySelector(".modal__close"),_.querySelector(".modal__form_add"),_.querySelector(".modal__input_type_title"),_.querySelector(".modal__input_type_url"),document.querySelector("#image-preview-modal")),m=(h.querySelector(".modal__image-preview"),h.querySelector(".modal__image-caption"),h.querySelector(".modal__close"),document.querySelector("#confirm-delete-modal").querySelector("#confirm-delete-submit"),document.querySelector("#avatar-edit-modal")),p=(document.querySelector("#card-template").content.firstElementChild,new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then(this._checkResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.url})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}loadPageContent(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f34fc940-6444-4c84-9643-915e876889fb","Content-Type":"application/json"}}));let E;p.getInitialCards().then((e=>{E=new i({items:e,renderer:e=>{const t=k(e);E.addItem(t)}},".cards__list"),E.renderItems()})).catch((e=>{console.error(e)}));const v=new class{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.textContent}}setUserInfo(e,t,s){this._nameElement.textContent=e,this._jobElement.textContent=t,this._avatarElement.textContent=s}setUserAvatar(e){this._avatarElement.src=e}}(".profile__title",".profile__description",".profile__image");p.loadUserInfo().then((e=>{v.getUserInfo()})).catch((e=>{console.error(e)}));const S=new s(e,n.querySelector(".modal__form_edit"));S.enableValidation();const f=new s(e,m.querySelector(".modal__form_avatar"));f.enableValidation();const b=new s(e,_.querySelector(".modal__form_add"));b.enableValidation();const y=new class extends r{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image-preview"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}("#image-preview-modal");function L(e,t){y.open(e,t)}function k(e){return new t(e,"#card-template",L,I,w).generateCard()}y.setEventListeners();const C=new o("#profile-edit-modal",(function(e){C.setLoading(!0),p.editProfileInfo(e).then((t=>{v.setUserInfo(e.title,e.description),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.setLoading(!1)}))}));C.setEventListeners();const g=new o("#profile-add-card-modal",(function(e){g.setLoading(!0),p.addCard(e).then((e=>{const t=k(e);E.addItem(t),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.setLoading(!1)}))}));g.setEventListeners();const q=new o("#avatar-edit-modal",(function(e){q.setLoading(!0),p.editProfilePicture(e.link).then((e=>{v.setUserAvatar(e.avatar),q.close()})).catch((e=>{console.error(e)})).finally((()=>{q.setLoading(!1)}))}));q.setEventListeners(),l.addEventListener("click",(()=>{S.resetValidation();const e=v.getUserInfo();d.value=e.name,c.value=e.job,C.open()})),u.addEventListener("click",(()=>{g.open(),b.resetValidation()})),a.addEventListener("click",(()=>{q.open(),f.resetValidation()}));const B=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleFormSubmit=e}setLoading(){isLoading?this._submitButton.textContent="Deleting...":this._submitButton.textContent=this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()})),super.setEventListeners()}}("#confirm-delete-modal");function I(e){B.open(),B.setSubmitAction((()=>{p.deleteCard(e._id).then((()=>{e.handleDeleteClick(),B.close()})).catch((e=>{console.error(e)}))}))}function w(e){e.isLiked?p.unlikeCard(e._id).then((t=>{e.setLikeClick(t.isLiked)})).catch((e=>{console.error(e)})):p.likeCard(e._id).then((t=>{e.setLikeClick(t.isLiked)})).catch((e=>{console.error(e)}))}B.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUFjakcsT0FDZGlHLEVBQWNDLGlCQUFnQixLQUM1QnBFLEVBQ0MwQixXQUFXNEMsRUFBSy9LLEtBQ2hCdUgsTUFBSyxLQUNKd0QsRUFBS3RMLG9CQUNMbUwsRUFBYy9GLE9BQU8sSUFFdEJrRSxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLEdBQ2xCLEdBR04sQ0FFQSxTQUFTdEosRUFBZ0JxTCxHQUNsQkEsRUFBSzlLLFFBVVJ3RyxFQUNDNkIsV0FBV3lDLEVBQUsvSyxLQUNoQnVILE1BQU1SLElBQ0xnRSxFQUFLN0osYUFBYTZGLEVBQUk5RyxRQUFRLElBRS9COEksT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQWZwQnZDLEVBQ0M0QixTQUFTMEMsRUFBSy9LLEtBQ2R1SCxNQUFNUixJQUNMZ0UsRUFBSzdKLGFBQWE2RixFQUFJOUcsUUFBUSxJQUUvQjhJLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksR0FZeEIsQ0F2Q0E0QixFQUFjM0YsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfVxyXG5dO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZVByZXZpZXdQaWN0dXJlLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrKSBcclxuICB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBjYXJkRGF0YS5pc0xpa2VkXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSA9IGhhbmRsZVByZXZpZXdQaWN0dXJlO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcbiAgXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0TGlrZUNsaWNrKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl91cGRhdGVMaWtlU3RhdHVzKCk7XHJcbiAgfSAgXHJcblxyXG4gIF91cGRhdGVMaWtlU3RhdHVzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDbGljaygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgICAgIFxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIFxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICBcclxuICAgIHRoaXMuX3VwZGF0ZUxpa2VTdGF0dXMoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgIFxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfSBcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyBcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgICAgXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyBcclxuICB9XHJcblxyXG4gIFxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuXHJcbiAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZERhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9IFxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fCBcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKVxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICBcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpOyBcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfSBcclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybVxyXG5cclxuLy9pbmRleC5qc1xyXG5cclxuLy8gY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiLCAoKSA9PiB7fSk7XHJcbi8vIG5ld0NhcmRQb3B1cC5vcGVuXHJcblxyXG5cclxuLy8gbmV3Q2FyZFBvcHVwLmNsb3NlKCkiLCIvLyBJbXBvcnQgYWxsIHRoZSBjbGFzc2VzXHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5cclxuXHJcbi8vIFByb2ZpbGUgRWRpdFxyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG5cclxuLy8gQWRkIENhcmRcclxuY29uc3QgcHJvZmlsZUFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRDbG9zZUJ1dHRvbiA9IHByb2ZpbGVBZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2FkZFwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRUaXRsZUlucHV0ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFVybElucHV0ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcclxuXHJcbi8vIFByZXZpZXcgSW1hZ2UgTW9kYWxcclxuY29uc3QgaW1hZ2VQcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7XHJcbmNvbnN0IG1vZGFsSW1hZ2VFbGVtZW50ID0gaW1hZ2VQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcclxuY29uc3QgbW9kYWxDYXB0aW9uID0gaW1hZ2VQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuY29uc3QgaW1hZ2VQcmV2aWV3Q2xvc2VCdXR0b24gPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbi8vIENvbmZpcm0gRGVsZXRlIE1vZGFsXHJcbmNvbnN0IHRyYXNoSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtbW9kYWxcIik7XHJcbmNvbnN0IHRyYXNoU3VibWl0QnV0dG9uID0gdHJhc2hJY29uLnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtc3VibWl0XCIpXHJcblxyXG4vLyBBdmF0YXIgRWRpdCBNb2RhbFxyXG5jb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIpO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImYzNGZjOTQwLTY0NDQtNGM4NC05NjQzLTkxNWU4NzY4ODlmYlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfVxyXG59KTsgXHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgaXRlbXM6IHJlcyxcclxuICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcclxuICAgICAgfSxcclxuICAgIH0sICBcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbiAgKTtcclxuICBcclxuICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgXHJcbiAgfSk7XHJcbiAgXHJcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLCBcIi5wcm9maWxlX19pbWFnZVwiKTsgICAgXHJcbiAgXHJcbmFwaVxyXG4gIC5sb2FkVXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcblxyXG5cclxuXHJcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9lZGl0XCIpOyAgXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlZGl0Rm9ybUVsZW1lbnQpOyAgXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgIFxyXG5cclxuY29uc3QgYXZhdGFyRm9ybUVsZW1lbnQgPSBhdmF0YXJFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9hdmF0YXJcIik7ICBcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYXZhdGFyRm9ybUVsZW1lbnQpOyAgXHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybUVsZW1lbnQgPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fYWRkXCIpOyAgXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGFkZEZvcm1FbGVtZW50KTsgIFxyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgIFxyXG5cclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7ICBcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByZXZpZXdQaWN0dXJlKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLCBcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZVByZXZpZXdQaWN0dXJlLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQpOyAgXHJcbnByb2ZpbGVFZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgLmVkaXRQcm9maWxlSW5mbyhpbnB1dFZhbHVlcylcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uKTtcclxuICAgIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgfSk7XHJcblxyXG59O1xyXG5cclxuY29uc3QgcHJvZmlsZUFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtYWRkLWNhcmQtbW9kYWxcIiwgaGFuZGxlUHJvZmlsZUFkZENhcmRTdWJtaXQpOyAgXHJcbnByb2ZpbGVBZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVBZGRDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcHJvZmlsZUFkZENhcmRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0gcmVuZGVyQ2FyZChyZXMpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmREYXRhKTtcclxuICAgICAgcHJvZmlsZUFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVBZGRDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsIGhhbmRsZUVkaXRBdmF0YXJTdWJtaXQpO1xyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRBdmF0YXJTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0UHJvZmlsZVBpY3R1cmUoaW5wdXRWYWx1ZXMubGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcilcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKClcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mby5uYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckluZm8uam9iO1xyXG4gIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLm9wZW4oKTtcclxuICBcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVBZGRDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKTtcclxuY29uZmlybURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuICBjb25maXJtRGVsZXRlLm9wZW4oKTtcclxuICBjb25maXJtRGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7ICBcclxuICAgIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2xpY2soKTtcclxuICAgICAgY29uZmlybURlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xyXG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XHJcbiAgICBhcGlcclxuICAgIC5saWtlQ2FyZChjYXJkLl9pZClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZC5zZXRMaWtlQ2xpY2socmVzLmlzTGlrZWQpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgIC51bmxpa2VDYXJkKGNhcmQuX2lkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjYXJkLnNldExpa2VDbGljayhyZXMuaXNMaWtlZCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59ICAgICAgICAiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuICBcclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBsb2FkVXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyx9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgZWRpdFByb2ZpbGVJbmZvKGNhcmREYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS50aXRsZSxcclxuICAgICAgICBhYm91dDogY2FyZERhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSAgXHJcbiAgfTtcclxuXHJcbiAgYWRkQ2FyZChpbnB1dFZhbHVlcykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcclxuICAgICAgICBsaW5rOiBpbnB1dFZhbHVlcy51cmwsIFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgdW5saWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgZWRpdFByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSBcclxuICB9XHJcblxyXG4gIGxvYWRQYWdlQ29udGVudCgpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5sb2FkVXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxuXHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IsIGF2YXRhcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQudGV4dENvbnRlbnQgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gbGluaztcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KVxyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfSBcclxufVxyXG5cclxuICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KVxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH0gIFxyXG5cclxuICBzZXRMb2FkaW5nKCkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZVByZXZpZXdQaWN0dXJlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlUHJldmlld1BpY3R1cmUiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsIl9saWtlQnV0dG9uIiwic2V0TGlrZUNsaWNrIiwiX3VwZGF0ZUxpa2VTdGF0dXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIm9wdGlvbnMiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRMb2FkaW5nIiwiaXNMb2FkaW5nIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlQWRkQ2FyZE1vZGFsIiwicHJvZmlsZUFkZENhcmRCdXR0b24iLCJpbWFnZVByZXZpZXdNb2RhbCIsImF2YXRhckVkaXRNb2RhbCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImxvYWRVc2VySW5mbyIsIm1ldGhvZCIsImVkaXRQcm9maWxlSW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJhYm91dCIsImRlc2NyaXB0aW9uIiwiYWRkQ2FyZCIsInVybCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJlZGl0UHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJsb2FkUGFnZUNvbnRlbnQiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwiY2FyZFNlY3Rpb24iLCJjYXJkRWwiLCJyZW5kZXJDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiQ2FyZCIsInByb2ZpbGVFZGl0Rm9ybVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZpbmFsbHkiLCJwcm9maWxlQWRkQ2FyZFBvcHVwIiwiYXZhdGFyRWRpdFBvcHVwIiwidXNlckluZm8iLCJjb25maXJtRGVsZXRlIiwic2V0U3VibWl0QWN0aW9uIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJjYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==