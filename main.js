!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handlePreviewPicture=s,this._handleDeleteClick=i,this._handleLikeClick=r}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handlePreviewPicture(this._name,this._link)})),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)}))}handleLikeClick(){this._likeButton.classList.toggle("card__like-button_active")}updateLikeStatus(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleDeleteClick(){this._element.remove(),this._element=null}generateCard(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._cardTitleEl=this._element.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button"),this._setEventListeners(),this._element}},s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}var n=class extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}};const o=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar-button"),c=(o.querySelector(".modal__close"),o.querySelector(".modal__form_edit"),document.querySelector("#profile-description-input")),d=document.querySelector("#profile-title-input"),_=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-add-card-modal")),u=document.querySelector("#profile-add-button"),h=(_.querySelector(".modal__close"),_.querySelector(".modal__form_add"),_.querySelector(".modal__input_type_title"),_.querySelector(".modal__input_type_url"),document.querySelector("#image-preview-modal")),m=(h.querySelector(".modal__image-preview"),h.querySelector(".modal__image-caption"),h.querySelector(".modal__close"),document.querySelector("#confirm-delete-modal").querySelector("#confirm-delete-submit"),document.querySelector("#avatar-edit-modal")),p=(document.querySelector("#card-template").content.firstElementChild,new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then(this._checkResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.url})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}loadPageContent(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f34fc940-6444-4c84-9643-915e876889fb","Content-Type":"application/json"}}));let E;p.getInitialCards().then((e=>{E=new i({items:e,renderer:e=>{const t=k(e);E.addItem(t)}},".cards__list"),E.renderItems()})).catch((e=>{console.error(e)}));const v=new class{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.textContent}}setUserInfo(e,t,s){this._nameElement.textContent=e,this._jobElement.textContent=t,this._avatarElement.textContent=s}setUserAvatar(e){this._avatarElement.src=e}}(".profile__title",".profile__description",".profile__image");p.loadUserInfo().then((e=>{v.getUserInfo()})).catch((e=>{console.error(e)}));const f=new s(e,o.querySelector(".modal__form_edit"));f.enableValidation(),new s(e,m.querySelector(".modal__form_avatar")).enableValidation();const S=new s(e,_.querySelector(".modal__form_add"));S.enableValidation();const b=new class extends r{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image-preview"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}("#image-preview-modal");function y(e,t){b.open(e,t)}function k(e){return new t(e,"#card-template",y,B,I).generateCard()}b.setEventListeners();const L=new n("#profile-edit-modal",(function(e){L.setLoading(!0),p.editProfileInfo(e).then((t=>{v.setUserInfo(e.title,e.description),L.close()})).catch((e=>{console.error(e)})).finally((()=>{L.setLoading(!1)}))}));L.setEventListeners();const C=new n("#profile-add-card-modal",(function(e){C.setLoading(!0),p.addCard(e).then((t=>{const s=k({name:e.title,link:e.url});E.addItem(s),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.setLoading(!1)}))}));C.setEventListeners();const g=new n("#avatar-edit-modal",(function(e){g.setLoading(!0),p.editProfilePicture(e.link).then((e=>{v.setUserAvatar(e.avatar),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.setLoading(!1)}))}));g.setEventListeners(),l.addEventListener("click",(()=>{f.resetValidation();const e=v.getUserInfo();d.value=e.name,c.value=e.job,L.open()})),u.addEventListener("click",(()=>{C.open(),S.resetValidation()})),a.addEventListener("click",(()=>{g.open()}));const q=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleFormSubmit=e}setLoading(){isLoading?this._submitButton.textContent="Deleting...":this._submitButton.textContent=this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{this._handleFormSubmit()})),super.setEventListeners()}}("#confirm-delete-modal");function B(e){q.open(),q.setSubmitAction((()=>{p.deleteCard(e._id).then((()=>{e.handleDeleteClick(),q.close()})).catch((e=>{console.error(e)}))}))}function I(e){e.isLiked?p.unlikeCard(e._id).then((t=>{e.handleLikeClick()})).catch((e=>{console.error(e)})):p.likeCard(e._id).then((t=>{e.handleLikeClick()})).catch((e=>{console.error(e)}))}q.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFpQ01BLEVBQXFCLENBQzlCQyxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJDLG9CQUFxQix5QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVksd0JDc0NoQixNQTdFQSxNQUNFQyxXQUFBQSxDQUFZQyxFQUFVQyxFQUFjQyxFQUFzQkMsRUFBbUJDLEdBRTNFQyxLQUFLQyxNQUFRTixFQUFTTyxLQUN0QkYsS0FBS0csTUFBUVIsRUFBU1MsS0FDdEJKLEtBQUtLLElBQU1WLEVBQVNVLElBQ3BCTCxLQUFLTSxTQUFXWCxFQUFTWSxRQUN6QlAsS0FBS1EsY0FBZ0JaLEVBQ3JCSSxLQUFLUyxzQkFBd0JaLEVBQzdCRyxLQUFLVSxtQkFBcUJaLEVBQzFCRSxLQUFLVyxpQkFBbUJaLENBQzFCLENBRUFhLFlBQUFBLEdBS0UsT0FKb0JDLFNBQ2pCQyxjQUFjZCxLQUFLUSxlQUNuQk8sUUFBUUMsa0JBQ1JDLFdBQVUsRUFFZixDQUVBQyxrQkFBQUEsR0FFRWxCLEtBQUttQixhQUFhQyxpQkFBaUIsU0FBUyxLQUMxQ3BCLEtBQUtTLHNCQUFzQlQsS0FBS0MsTUFBT0QsS0FBS0csTUFBTSxJQUdwREgsS0FBS3FCLGNBQWdCckIsS0FBS3NCLFNBQVNSLGNBQWMsd0JBQ2pEZCxLQUFLcUIsY0FBY0QsaUJBQWlCLFNBQVMsS0FDM0NwQixLQUFLVSxtQkFBbUJWLEtBQUssSUFHL0JBLEtBQUt1QixZQUFjdkIsS0FBS3NCLFNBQVNSLGNBQWMsc0JBQy9DZCxLQUFLdUIsWUFBWUgsaUJBQWlCLFNBQVMsS0FDekNwQixLQUFLVyxpQkFBaUJYLEtBQUssR0FHL0IsQ0FFQUQsZUFBQUEsR0FDRUMsS0FBS3VCLFlBQVlDLFVBQVVDLE9BQU8sMkJBQ3BDLENBRUFDLGdCQUFBQSxHQUNNMUIsS0FBS00sU0FDUE4sS0FBS3VCLFlBQVlDLFVBQVVHLElBQUksNEJBRS9CM0IsS0FBS3VCLFlBQVlDLFVBQVVJLE9BQU8sMkJBRXRDLENBRUE5QixpQkFBQUEsR0FDRUUsS0FBS3NCLFNBQVNNLFNBQ2Q1QixLQUFLc0IsU0FBVyxJQUNsQixDQUdBTyxZQUFBQSxHQWVFLE9BZEE3QixLQUFLc0IsU0FBV3RCLEtBQUtZLGVBRXJCWixLQUFLbUIsYUFBZW5CLEtBQUtzQixTQUFTUixjQUFjLGdCQUNoRGQsS0FBSzhCLGFBQWU5QixLQUFLc0IsU0FBU1IsY0FBYyxnQkFFaERkLEtBQUttQixhQUFhWSxJQUFNL0IsS0FBS0csTUFDN0JILEtBQUttQixhQUFhYSxJQUFNaEMsS0FBS0MsTUFDN0JELEtBQUs4QixhQUFhRyxZQUFjakMsS0FBS0MsTUFFckNELEtBQUtxQixjQUFnQnJCLEtBQUtzQixTQUFTUixjQUFjLHdCQUNqRGQsS0FBS3VCLFlBQWN2QixLQUFLc0IsU0FBU1IsY0FBYyxzQkFFL0NkLEtBQUtrQixxQkFFRWxCLEtBQUtzQixRQUNkLEdDY0YsRUF2RkEsTUFDRTVCLFdBQUFBLENBQVl3QyxFQUFTQyxHQUNuQm5DLEtBQUtvQyxlQUFpQkYsRUFBUTdDLGNBQzlCVyxLQUFLcUMsc0JBQXdCSCxFQUFRNUMscUJBQ3JDVSxLQUFLc0MscUJBQXVCSixFQUFRM0Msb0JBQ3BDUyxLQUFLdUMsaUJBQW1CTCxFQUFRMUMsZ0JBQ2hDUSxLQUFLd0MsWUFBY04sRUFBUXpDLFdBQzNCTyxLQUFLeUMsUUFBVU4sQ0FDakIsQ0FFQU8sZUFBQUEsQ0FBZ0JDLEdBQ2QsTUFBTUMsRUFBaUI1QyxLQUFLeUMsUUFBUTNCLGNBQWUsSUFBRzZCLEVBQVFFLFlBQzlERixFQUFRbkIsVUFBVUcsSUFBSTNCLEtBQUt1QyxrQkFDM0JLLEVBQWVYLFlBQWNVLEVBQVFHLGtCQUNyQ0YsRUFBZXBCLFVBQVVHLElBQUkzQixLQUFLd0MsWUFDcEMsQ0FFQU8sZUFBQUEsQ0FBZ0JKLEdBQ2QsTUFBTUMsRUFBaUI1QyxLQUFLeUMsUUFBUTNCLGNBQWUsSUFBRzZCLEVBQVFFLFlBQzlERixFQUFRbkIsVUFBVUksT0FBTzVCLEtBQUt1QyxrQkFDOUJLLEVBQWVYLFlBQWMsR0FDN0JXLEVBQWVwQixVQUFVSSxPQUFPNUIsS0FBS3dDLFlBQ3ZDLENBRUFRLG1CQUFBQSxDQUFvQkwsR0FDYkEsRUFBUU0sU0FBU0MsTUFHckJsRCxLQUFLK0MsZ0JBQWdCSixHQUZwQjNDLEtBQUswQyxnQkFBZ0JDLEVBSXpCLENBRUFRLGdCQUFBQSxHQUNFLE9BQVFuRCxLQUFLb0QsVUFBVUMsT0FBT1YsR0FBWUEsRUFBUU0sU0FBU0MsT0FDN0QsQ0FFQUksYUFBQUEsR0FDRXRELEtBQUt1RCxjQUFjL0IsVUFBVUcsSUFBSTNCLEtBQUtzQyxzQkFDdEN0QyxLQUFLdUQsY0FBY0MsVUFBVyxDQUNoQyxDQUVBQyxhQUFBQSxHQUNFekQsS0FBS3VELGNBQWMvQixVQUFVSSxPQUFPNUIsS0FBS3NDLHNCQUN6Q3RDLEtBQUt1RCxjQUFjQyxVQUFXLENBQ2hDLENBRUFFLGtCQUFBQSxHQUNNMUQsS0FBS21ELGlCQUFpQm5ELEtBQUtvRCxZQUM3QnBELEtBQUt1RCxjQUFjL0IsVUFBVUcsSUFBSTNCLEtBQUtzQyxzQkFDdEN0QyxLQUFLdUQsY0FBY0MsVUFBVyxJQUc5QnhELEtBQUt1RCxjQUFjL0IsVUFBVUksT0FBTzVCLEtBQUtzQyxzQkFDekN0QyxLQUFLdUQsY0FBY0MsVUFBVyxFQUVsQyxDQUVBdEMsa0JBQUFBLEdBQ0VsQixLQUFLb0QsVUFBWSxJQUFJcEQsS0FBS3lDLFFBQVFrQixpQkFBaUIzRCxLQUFLb0MsaUJBQ3hEcEMsS0FBS3VELGNBQWdCdkQsS0FBS3lDLFFBQVEzQixjQUFjZCxLQUFLcUMsdUJBRXJEckMsS0FBS29ELFVBQVVRLFNBQVNqQixJQUN0QkEsRUFBUXZCLGlCQUFpQixTQUFVeUMsSUFDakM3RCxLQUFLZ0Qsb0JBQW9CTCxHQUN6QjNDLEtBQUswRCxvQkFBb0IsR0FDekIsR0FFTixDQUVBSSxnQkFBQUEsR0FDRTlELEtBQUt5QyxRQUFRckIsaUJBQWlCLFVBQVd5QyxJQUN2Q0EsRUFBRUUsZ0JBQWdCLElBRXBCL0QsS0FBS2tCLG9CQUNQLENBR0E4QyxlQUFBQSxHQUNBaEUsS0FBSzBELHFCQUVMMUQsS0FBS29ELFVBQVVRLFNBQVNLLElBQ3RCakUsS0FBSytDLGdCQUFnQmtCLEVBQWEsR0FFcEMsR0NuRmEsTUFBTUMsRUFDbkJ4RSxXQUFBQSxDQUFXeUUsRUFBc0JDLEdBQW1CLElBQXhDLE1BQUVDLEVBQUssU0FBRUMsR0FBVUgsRUFDN0JuRSxLQUFLdUUsT0FBU0YsRUFDZHJFLEtBQUt3RSxVQUFZRixFQUNqQnRFLEtBQUt5RSxXQUFhNUQsU0FBU0MsY0FBY3NELEVBQzNDLENBRUFNLFdBQUFBLEdBQ0UxRSxLQUFLdUUsT0FBT1gsU0FBU2pFLElBQ25CSyxLQUFLd0UsVUFBVTdFLEVBQVMsR0FFNUIsQ0FFQWdGLE9BQUFBLENBQVFDLEdBQ041RSxLQUFLeUUsV0FBV0ksUUFBUUQsRUFDMUIsRUNiYSxNQUFNRSxFQUNuQnBGLFdBQUFBLENBQVd5RSxHQUFvQixJQUFuQixjQUFFWSxHQUFlWixFQUMzQm5FLEtBQUtnRixjQUFnQm5FLFNBQVNDLGNBQWNpRSxFQUM5QyxDQUVBRSxJQUFBQSxHQUNFakYsS0FBS2dGLGNBQWN4RCxVQUFVRyxJQUFJLGdCQUNqQ2QsU0FBU08saUJBQWlCLFVBQVdwQixLQUFLa0YsZ0JBQzVDLENBRUFDLEtBQUFBLEdBQ0VuRixLQUFLZ0YsY0FBY3hELFVBQVVJLE9BQU8sZ0JBQ3BDZixTQUFTdUUsb0JBQW9CLFVBQVdwRixLQUFLa0YsZ0JBQy9DLENBRUFBLGdCQUFtQkcsSUFDRCxXQUFaQSxFQUFJQyxLQUNOdEYsS0FBS21GLE9BQ1AsRUFHRkksaUJBQUFBLEdBQ0V2RixLQUFLZ0YsY0FBYzVELGlCQUFpQixTQUFVaUUsS0FFMUNBLEVBQUlHLFNBQVd4RixLQUFLZ0YsZUFDcEJLLEVBQUlHLE9BQU9oRSxVQUFVaUUsU0FBUyxrQkFFOUJ6RixLQUFLbUYsT0FDUCxHQUVKLEVDV0YsTUF6Q0EsY0FBNEJMLEVBQzFCcEYsV0FBQUEsQ0FBWXFGLEVBQWVXLEdBQ3pCQyxNQUFNLENBQUVaLGtCQUNSL0UsS0FBSzRGLFdBQWE1RixLQUFLZ0YsY0FBY2xFLGNBQWMsZ0JBQ25EZCxLQUFLNkYsa0JBQW9CSCxFQUN6QjFGLEtBQUs4RixXQUFhOUYsS0FBSzRGLFdBQVdqQyxpQkFBaUIsaUJBQ25EM0QsS0FBS3VELGNBQWdCdkQsS0FBSzRGLFdBQVc5RSxjQUFjLGlCQUVyRCxDQUVBcUUsS0FBQUEsR0FDRW5GLEtBQUs0RixXQUFXRyxRQUNoQkosTUFBTVIsT0FDUixDQUdBYSxlQUFBQSxHQUNFLE1BQU1DLEVBQWMsQ0FBQyxFQUlyQixPQUhBakcsS0FBSzhGLFdBQVdsQyxTQUFTc0MsSUFDdkJELEVBQVlDLEVBQU1oRyxNQUFRZ0csRUFBTUMsS0FBSyxJQUVoQ0YsQ0FDVCxDQUVBRyxVQUFBQSxDQUFXQyxHQUVQckcsS0FBS3VELGNBQWN0QixZQURqQm9FLEVBQytCLFlBRUFyRyxLQUFLc0csaUJBRTFDLENBRUFmLGlCQUFBQSxHQUNFdkYsS0FBSzRGLFdBQVd4RSxpQkFBaUIsVUFBV2lFLElBQzFDQSxFQUFJdEIsaUJBQ0ovRCxLQUFLNkYsa0JBQWtCN0YsS0FBS2dHLGtCQUFrQixJQUVoREwsTUFBTUosbUJBQ1IsR0N6QkYsTUFBTWdCLEVBQW1CMUYsU0FBU0MsY0FBYyx1QkFDMUMwRixFQUFvQjNGLFNBQVNDLGNBQWMsd0JBQzNDMkYsRUFBc0I1RixTQUFTQyxjQUFjLDBCQUc3QzRGLEdBRnFCSCxFQUFpQnpGLGNBQWMsaUJBQ2xDeUYsRUFBaUJ6RixjQUFjLHFCQUN2QkQsU0FBU0MsY0FBYywrQkFDakQ2RixFQUFvQjlGLFNBQVNDLGNBQWMsd0JBTTNDOEYsR0FMZS9GLFNBQVNDLGNBQWMsbUJBQ2pCRCxTQUFTQyxjQUFjLHlCQUl0QkQsU0FBU0MsY0FBYyw0QkFDN0MrRixFQUF1QmhHLFNBQVNDLGNBQWMsdUJBTzlDZ0csR0FONEJGLEVBQW9COUYsY0FBYyxpQkFDaEQ4RixFQUFvQjlGLGNBQWMsb0JBQ3JCOEYsRUFBb0I5RixjQUFjLDRCQUNwQzhGLEVBQW9COUYsY0FBYywwQkFHdkNELFNBQVNDLGNBQWMseUJBVTNDaUcsR0FUb0JELEVBQWtCaEcsY0FBYyx5QkFDckNnRyxFQUFrQmhHLGNBQWMseUJBQ3JCZ0csRUFBa0JoRyxjQUFjLGlCQUc5Q0QsU0FBU0MsY0FBYyx5QkFDTEEsY0FBYywwQkFHMUJELFNBQVNDLGNBQWMsdUJBTXpDa0csR0FKZW5HLFNBQVNDLGNBQWMsa0JBQWtCQyxRQUFRQyxrQkFJMUQsSUNqREcsTUFDYnRCLFdBQUFBLENBQVd5RSxHQUF1QixJQUF0QixRQUFFOEMsRUFBTyxRQUFFQyxHQUFTL0MsRUFDOUJuRSxLQUFLbUgsU0FBV0YsRUFDaEJqSCxLQUFLb0gsU0FBV0YsQ0FDbEIsQ0FFQUcsY0FBQUEsQ0FBZUMsR0FDYixPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFRLFVBQVNKLEVBQUlLLFNBQ3RDLENBR0FDLGVBQUFBLEdBQ0UsT0FBT0MsTUFBTyxHQUFFN0gsS0FBS21ILGlCQUNyQixDQUFFRCxRQUFTbEgsS0FBS29ILFdBQWFVLEtBQUs5SCxLQUFLcUgsZUFDekMsQ0FFQVUsWUFBQUEsR0FDRSxPQUFPRixNQUFPLEdBQUU3SCxLQUFLbUgsb0JBQXFCLENBQ3hDYSxPQUFRLE1BQ1JkLFFBQVNsSCxLQUFLb0gsV0FBWVUsS0FBSzlILEtBQUtxSCxlQUN4QyxDQUVBWSxlQUFBQSxDQUFnQnRJLEdBQ2QsT0FBT2tJLE1BQU8sR0FBRTdILEtBQUttSCxvQkFDckIsQ0FDRWEsT0FBUSxRQUNSZCxRQUFTbEgsS0FBS29ILFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJsSSxLQUFNUCxFQUFTMEksTUFDZkMsTUFBTzNJLEVBQVM0SSxnQkFFakJULEtBQUs5SCxLQUFLcUgsZUFDZixDQUVBbUIsT0FBQUEsQ0FBUXZDLEdBQ04sT0FBTzRCLE1BQU8sR0FBRTdILEtBQUttSCxpQkFDckIsQ0FDRWEsT0FBUSxPQUNSZCxRQUFTbEgsS0FBS29ILFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJsSSxLQUFNK0YsRUFBWW9DLE1BQ2xCakksS0FBTTZGLEVBQVl3QyxRQUVuQlgsS0FBSzlILEtBQUtxSCxlQUNmLENBRUFxQixVQUFBQSxDQUFXQyxHQUNULE9BQU9kLE1BQU8sR0FBRTdILEtBQUttSCxrQkFBa0J3QixJQUN2QyxDQUNFWCxPQUFRLFNBQ1JkLFFBQVNsSCxLQUFLb0gsV0FFZlUsS0FBSzlILEtBQUtxSCxlQUNiLENBRUF1QixRQUFBQSxDQUFTRCxHQUNQLE9BQU9kLE1BQU8sR0FBRTdILEtBQUttSCxrQkFBa0J3QixVQUN2QyxDQUNFWCxPQUFRLE1BQ1JkLFFBQVNsSCxLQUFLb0gsV0FFZlUsS0FBSzlILEtBQUtxSCxlQUNiLENBRUF3QixVQUFBQSxDQUFXRixHQUNULE9BQU9kLE1BQU8sR0FBRTdILEtBQUttSCxrQkFBa0J3QixVQUN2QyxDQUNFWCxPQUFRLFNBQ1JkLFFBQVNsSCxLQUFLb0gsV0FFZlUsS0FBSzlILEtBQUtxSCxlQUNiLENBRUF5QixrQkFBQUEsQ0FBbUIxSSxHQUNqQixPQUFPeUgsTUFBTyxHQUFFN0gsS0FBS21ILDJCQUNyQixDQUNFYSxPQUFRLFFBQ1JkLFFBQVNsSCxLQUFLb0gsU0FDZGMsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQlcsT0FBUTNJLE1BRVQwSCxLQUFLOUgsS0FBS3FILGVBQ2YsQ0FFQTJCLGVBQUFBLEdBQ0UsT0FBT3ZCLFFBQVF3QixJQUFJLENBQUNqSixLQUFLK0gsZUFBZ0IvSCxLQUFLNEgsbUJBQ2hELEdEeENrQixDQUNsQlgsUUFBUyxrREFDVEMsUUFBUyxDQUNQZ0MsY0FBZSx1Q0FDZixlQUFnQix1QkFJcEIsSUFBSUMsRUFFSm5DLEVBQ0dZLGtCQUNBRSxNQUFNUixJQUNMNkIsRUFBYyxJQUFJakYsRUFBUSxDQUN4QkcsTUFBT2lELEVBQ1BoRCxTQUFXM0UsSUFDVCxNQUFNeUosRUFBU0MsRUFBVzFKLEdBQzFCd0osRUFBWXhFLFFBQVF5RSxFQUFPLEdBR2pDLGdCQUdBRCxFQUFZekUsYUFBYSxJQUV4QjRFLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFHdEIsTUFBTUcsRUFBa0IsSUVoRlQsTUFDYmhLLFdBQUFBLENBQVlpSyxFQUFjQyxFQUFhQyxHQUNyQzdKLEtBQUs4SixhQUFlakosU0FBU0MsY0FBYzZJLEdBQzNDM0osS0FBSytKLFlBQWNsSixTQUFTQyxjQUFjOEksR0FDMUM1SixLQUFLZ0ssZUFBaUJuSixTQUFTQyxjQUFjK0ksRUFDL0MsQ0FFQUksV0FBQUEsR0FNRSxNQUxpQixDQUNmL0osS0FBTUYsS0FBSzhKLGFBQWE3SCxZQUN4QmlJLElBQUtsSyxLQUFLK0osWUFBWTlILFlBQ3RCOEcsT0FBUS9JLEtBQUtnSyxlQUFlL0gsWUFHaEMsQ0FFQWtJLFdBQUFBLENBQVlqSyxFQUFNZ0ssRUFBS25CLEdBQ3JCL0ksS0FBSzhKLGFBQWE3SCxZQUFjL0IsRUFDaENGLEtBQUsrSixZQUFZOUgsWUFBY2lJLEVBQy9CbEssS0FBS2dLLGVBQWUvSCxZQUFjOEcsQ0FDcEMsQ0FFQXFCLGFBQUFBLENBQWNoSyxHQUNaSixLQUFLZ0ssZUFBZWpJLElBQU0zQixDQUM1QixHRndEbUMsa0JBQW1CLHdCQUF5QixtQkFFakY0RyxFQUNHZSxlQUNBRCxNQUFNUixJQUNMb0MsRUFBZ0JPLGFBQWEsSUFFOUJYLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFNdEIsTUFDTWMsRUFBb0IsSUFBSUMsRUFBY25MLEVBRHBCb0gsRUFBaUJ6RixjQUFjLHNCQUV2RHVKLEVBQWtCdkcsbUJBR1UsSUFBSXdHLEVBQWNuTCxFQURwQjRILEVBQWdCakcsY0FBYyx3QkFFcENnRCxtQkFFcEIsTUFDTXlHLEVBQW1CLElBQUlELEVBQWNuTCxFQURwQnlILEVBQW9COUYsY0FBYyxxQkFFekR5SixFQUFpQnpHLG1CQUdqQixNQUFNMEcsRUFBaUIsSUd6R1IsY0FBNkIxRixFQUMxQ3BGLFdBQUFBLENBQVlxRixHQUNWWSxNQUFNLENBQUVaLGtCQUNSL0UsS0FBS3lLLE9BQVN6SyxLQUFLZ0YsY0FBY2xFLGNBQWMseUJBQy9DZCxLQUFLMEssU0FBVzFLLEtBQUtnRixjQUFjbEUsY0FBYyx3QkFDbkQsQ0FHQW1FLElBQUFBLENBQUsvRSxFQUFNRSxHQUNUSixLQUFLeUssT0FBTzFJLElBQU0zQixFQUNsQkosS0FBS3lLLE9BQU96SSxJQUFNOUIsRUFDbEJGLEtBQUswSyxTQUFTekksWUFBYy9CLEVBQzVCeUYsTUFBTVYsTUFDUixHSDRGd0Msd0JBRzFDLFNBQVNwRixFQUFxQkssRUFBTUUsR0FDbENvSyxFQUFldkYsS0FBSy9FLEVBQU1FLEVBQzVCLENBR0EsU0FBU2lKLEVBQVcxSixHQVFsQixPQVBhLElBQUlnTCxFQUNmaEwsRUFDQSxpQkFDQUUsRUFDQUMsRUFDQUMsR0FFVThCLGNBQ2QsQ0FoQkEySSxFQUFlakYsb0JBa0JmLE1BQU1xRixFQUF1QixJQUFJQyxFQUFjLHVCQUcvQyxTQUFpQzVFLEdBQy9CMkUsRUFBcUJ4RSxZQUFXLEdBQ2hDWSxFQUNDaUIsZ0JBQWdCaEMsR0FDaEI2QixNQUFNUixJQUNMb0MsRUFBZ0JTLFlBQVlsRSxFQUFZb0MsTUFBT3BDLEVBQVlzQyxhQUMzRHFDLEVBQXFCekYsT0FBTyxJQUU3Qm1FLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFFbkJ1QixTQUFRLEtBQ1BGLEVBQXFCeEUsWUFBVyxFQUFNLEdBRzFDLElBakJBd0UsRUFBcUJyRixvQkFtQnJCLE1BQU13RixFQUFzQixJQUFJRixFQUFjLDJCQUc5QyxTQUFvQzVFLEdBQ2xDOEUsRUFBb0IzRSxZQUFXLEdBQy9CWSxFQUNHd0IsUUFBUXZDLEdBQ1I2QixNQUFNUixJQUNMLE1BQU0zSCxFQUFXMEosRUFBVyxDQUFDbkosS0FBTStGLEVBQVlvQyxNQUFPakksS0FBTTZGLEVBQVl3QyxNQUN4RVUsRUFBWXhFLFFBQVFoRixHQUNwQm9MLEVBQW9CNUYsT0FBTyxJQUU1Qm1FLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFFbkJ1QixTQUFRLEtBQ1BDLEVBQW9CM0UsWUFBVyxFQUFNLEdBRTNDLElBakJBMkUsRUFBb0J4RixvQkFtQnBCLE1BQU15RixFQUFrQixJQUFJSCxFQUFjLHNCQUcxQyxTQUFnQzVFLEdBQzlCK0UsRUFBZ0I1RSxZQUFXLEdBQzNCWSxFQUNHOEIsbUJBQW1CN0MsRUFBWTdGLE1BQy9CMEgsTUFBTVIsSUFDTG9DLEVBQWdCVSxjQUFjOUMsRUFBSXlCLFFBQ2xDaUMsRUFBZ0I3RixPQUFPLElBRXhCbUUsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUVuQnVCLFNBQVEsS0FDUEUsRUFBZ0I1RSxZQUFXLEVBQU0sR0FFdkMsSUFoQkE0RSxFQUFnQnpGLG9CQWtCaEJpQixFQUFrQnBGLGlCQUFpQixTQUFTLEtBQzFDaUosRUFBa0JyRyxrQkFDbEIsTUFBTWlILEVBQVd2QixFQUFnQk8sY0FDakN0RCxFQUFrQlIsTUFBUThFLEVBQVMvSyxLQUNuQ3dHLEVBQXdCUCxNQUFROEUsRUFBU2YsSUFDekNVLEVBQXFCM0YsTUFBTSxJQUk3QjRCLEVBQXFCekYsaUJBQWlCLFNBQVMsS0FDN0MySixFQUFvQjlGLE9BQ3BCc0YsRUFBaUJ2RyxpQkFBaUIsSUFHcEN5QyxFQUFvQnJGLGlCQUFpQixTQUFTLEtBQzVDNEosRUFBZ0IvRixNQUFNLElBR3hCLE1BQU1pRyxFQUFnQixJSXpNUCxjQUFvQ3BHLEVBQ2pEcEYsV0FBQUEsQ0FBWXFGLEdBQ1ZZLE1BQU0sQ0FBRVosa0JBQ1IvRSxLQUFLNEYsV0FBYTVGLEtBQUtnRixjQUFjbEUsY0FBYyxnQkFDbkRkLEtBQUt1RCxjQUFnQnZELEtBQUs0RixXQUFXOUUsY0FBYyxpQkFDckQsQ0FFQXFLLGVBQUFBLENBQWdCekYsR0FDZDFGLEtBQUs2RixrQkFBb0JILENBQzNCLENBRUFVLFVBQUFBLEdBQ01DLFVBQ0ZyRyxLQUFLdUQsY0FBY3RCLFlBQWMsY0FFakNqQyxLQUFLdUQsY0FBY3RCLFlBQWNqQyxLQUFLc0csaUJBRTFDLENBRUFmLGlCQUFBQSxHQUNFdkYsS0FBSzRGLFdBQVd4RSxpQkFBaUIsVUFBV2lFLElBQzFDckYsS0FBSzZGLG1CQUFtQixJQUUxQkYsTUFBTUosbUJBQ1IsR0ppTDhDLHlCQUloRCxTQUFTekYsRUFBa0JzTCxHQUN6QkYsRUFBY2pHLE9BQ2RpRyxFQUFjQyxpQkFBZ0IsS0FDNUJuRSxFQUNDMEIsV0FBVzBDLEVBQUsvSyxLQUNoQnlILE1BQUssS0FDSnNELEVBQUt0TCxvQkFDTG9MLEVBQWMvRixPQUFPLElBRXRCbUUsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHQUNsQixHQUdOLENBRUEsU0FBU3hKLEVBQWdCcUwsR0FDbEJBLEVBQUs3SyxRQVVSeUcsRUFDQzZCLFdBQVd1QyxFQUFLL0ssS0FDaEJ5SCxNQUFNUixJQUNMOEQsRUFBS3JMLGlCQUFpQixJQUV2QnVKLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFmcEJ2QyxFQUNDNEIsU0FBU3dDLEVBQUsvSyxLQUNkeUgsTUFBTVIsSUFDTDhELEVBQUtyTCxpQkFBaUIsSUFFdkJ1SixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLEdBWXhCLENBdkNBMkIsRUFBYzNGLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH1cclxuXTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIlxyXG59O1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVQcmV2aWV3UGljdHVyZSwgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaykgXHJcbiAge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWRcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlID0gaGFuZGxlUHJldmlld1BpY3R1cmU7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuICBcclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGRcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG4gIH1cclxuICBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfSAgXHJcblxyXG4gIHVwZGF0ZUxpa2VTdGF0dXMoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDbGljaygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgICAgIFxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIFxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgIFxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfSBcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyBcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgICAgXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyBcclxuICB9XHJcblxyXG4gIFxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuXHJcbiAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZERhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9IFxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fCBcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKVxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICBcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpOyBcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfSBcclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtXHJcblxyXG4vL2luZGV4LmpzXHJcblxyXG4vLyBjb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCIsICgpID0+IHt9KTtcclxuLy8gbmV3Q2FyZFBvcHVwLm9wZW5cclxuXHJcblxyXG4vLyBuZXdDYXJkUG9wdXAuY2xvc2UoKSIsIi8vIEltcG9ydCBhbGwgdGhlIGNsYXNzZXNcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcblxyXG5cclxuLy8gUHJvZmlsZSBFZGl0XHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2VkaXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcblxyXG4vLyBBZGQgQ2FyZFxyXG5jb25zdCBwcm9maWxlQWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZENsb3NlQnV0dG9uID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fYWRkXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFRpdGxlSW5wdXQgPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRDYXJkVXJsSW5wdXQgPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCIpO1xyXG5cclxuLy8gUHJldmlldyBJbWFnZSBNb2RhbFxyXG5jb25zdCBpbWFnZVByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgbW9kYWxJbWFnZUVsZW1lbnQgPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xyXG5jb25zdCBtb2RhbENhcHRpb24gPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xyXG5jb25zdCBpbWFnZVByZXZpZXdDbG9zZUJ1dHRvbiA9IGltYWdlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5cclxuLy8gQ29uZmlybSBEZWxldGUgTW9kYWxcclxuY29uc3QgdHJhc2hJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKTtcclxuY29uc3QgdHJhc2hTdWJtaXRCdXR0b24gPSB0cmFzaEljb24ucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1zdWJtaXRcIilcclxuXHJcbi8vIEF2YXRhciBFZGl0IE1vZGFsXHJcbmNvbnN0IGF2YXRhckVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWVkaXQtbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcblxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZjM0ZmM5NDAtNjQ0NC00Yzg0LTk2NDMtOTE1ZTg3Njg4OWZiXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9XHJcbn0pOyBcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICBpdGVtczogcmVzLFxyXG4gICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xyXG4gICAgICB9LFxyXG4gICAgfSwgIFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuICApO1xyXG4gIFxyXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyBcclxuICB9KTtcclxuICBcclxuY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsIFwiLnByb2ZpbGVfX2ltYWdlXCIpOyAgICBcclxuICBcclxuYXBpXHJcbiAgLmxvYWRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2VkaXRcIik7ICBcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWxlbWVudCk7ICBcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAgXHJcblxyXG5jb25zdCBhdmF0YXJGb3JtRWxlbWVudCA9IGF2YXRhckVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2F2YXRhclwiKTsgIFxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhdmF0YXJGb3JtRWxlbWVudCk7ICBcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtRWxlbWVudCA9IHByb2ZpbGVBZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9hZGRcIik7ICBcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpOyAgXHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAgXHJcblxyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTsgIFxyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJldmlld1BpY3R1cmUobmFtZSwgbGluaykge1xyXG4gIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsIFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlUHJldmlld1BpY3R1cmUsXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7ICBcclxucHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAuZWRpdFByb2ZpbGVJbmZvKGlucHV0VmFsdWVzKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xyXG4gICAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICB9KTtcclxuXHJcbn07XHJcblxyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVQcm9maWxlQWRkQ2FyZFN1Ym1pdCk7ICBcclxucHJvZmlsZUFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUFkZENhcmRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBwcm9maWxlQWRkQ2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSByZW5kZXJDYXJkKHtuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSwgbGluazogaW5wdXRWYWx1ZXMudXJsfSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZERhdGEpO1xyXG4gICAgICBwcm9maWxlQWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcHJvZmlsZUFkZENhcmRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLWVkaXQtbW9kYWxcIiwgaGFuZGxlRWRpdEF2YXRhclN1Ym1pdCk7XHJcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdEF2YXRhclN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRQcm9maWxlUGljdHVyZShpbnB1dFZhbHVlcy5saW5rKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKVxyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgdXNlckluZm8gPSBwcm9maWxlVXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VySW5mby5qb2I7XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG4gIFxyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5wcm9maWxlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKTtcclxuY29uZmlybURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuICBjb25maXJtRGVsZXRlLm9wZW4oKTtcclxuICBjb25maXJtRGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7ICBcclxuICAgIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2xpY2soKTtcclxuICAgICAgY29uZmlybURlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xyXG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XHJcbiAgICBhcGlcclxuICAgIC5saWtlQ2FyZChjYXJkLl9pZClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAudW5saWtlQ2FyZChjYXJkLl9pZClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcbn0gICAgICAgICIsImltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG4gIFxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCBcclxuICAgIHsgaGVhZGVyczogdGhpcy5faGVhZGVycywgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH07XHJcblxyXG4gIGxvYWRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBlZGl0UHJvZmlsZUluZm8oY2FyZERhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGNhcmREYXRhLnRpdGxlLFxyXG4gICAgICAgIGFib3V0OiBjYXJkRGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpICBcclxuICB9O1xyXG5cclxuICBhZGRDYXJkKGlucHV0VmFsdWVzKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgICAgIGxpbms6IGlucHV0VmFsdWVzLnVybCwgXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH07XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwgXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH07XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBlZGl0UHJvZmlsZVBpY3R1cmUobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gIH1cclxuXHJcbiAgbG9hZFBhZ2VDb250ZW50KCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmxvYWRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcbiAgXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYiwgYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC50ZXh0Q29udGVudCA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIobGluaykge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pXHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9IFxyXG59XHJcblxyXG4gIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfSAgXHJcblxyXG4gIHNldExvYWRpbmcoKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVQcmV2aWV3UGljdHVyZSIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlUHJldmlld1BpY3R1cmUiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidXBkYXRlTGlrZVN0YXR1cyIsImFkZCIsInJlbW92ZSIsImdlbmVyYXRlQ2FyZCIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50Iiwib3B0aW9ucyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwiZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJfc3VibWl0QnV0dG9uVGV4dCIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJCdXR0b24iLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZUFkZENhcmRNb2RhbCIsInByb2ZpbGVBZGRDYXJkQnV0dG9uIiwiaW1hZ2VQcmV2aWV3TW9kYWwiLCJhdmF0YXJFZGl0TW9kYWwiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJsb2FkVXNlckluZm8iLCJtZXRob2QiLCJlZGl0UHJvZmlsZUluZm8iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRpdGxlIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsImFkZENhcmQiLCJ1cmwiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwiZWRpdFByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwibG9hZFBhZ2VDb250ZW50IiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY2FyZEVsIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicHJvZmlsZVVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiQ2FyZCIsInByb2ZpbGVFZGl0Rm9ybVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZpbmFsbHkiLCJwcm9maWxlQWRkQ2FyZFBvcHVwIiwiYXZhdGFyRWRpdFBvcHVwIiwidXNlckluZm8iLCJjb25maXJtRGVsZXRlIiwic2V0U3VibWl0QWN0aW9uIiwiY2FyZCJdLCJzb3VyY2VSb290IjoiIn0=