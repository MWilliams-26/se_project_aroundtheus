!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handlePreviewPicture=s,this._handleDeleteClick=i,this._handleLikeClick=r}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handlePreviewPicture(this._name,this._link)})),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)}))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle(".card__like-button_active")}_updateLikeStatus(){this._isLiked?this._likeButton.classList.add(".card__like-button_active"):this._likeButton.classList.remove(".card__like-button_active")}handleDeleteClick(){this._element.remove(),this._element=null}generateCard(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._cardTitleEl=this._element.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button"),this._setEventListeners(),this._element}},s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}var o=class extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}};const n=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar-button"),c=(n.querySelector(".modal__close"),n.querySelector(".modal__form_edit"),document.querySelector("#profile-description-input")),d=document.querySelector("#profile-title-input"),_=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-add-card-modal")),u=document.querySelector("#profile-add-button"),h=(_.querySelector(".modal__close"),_.querySelector(".modal__form_add"),_.querySelector(".modal__input_type_title"),_.querySelector(".modal__input_type_url"),document.querySelector("#image-preview-modal")),m=(h.querySelector(".modal__image-preview"),h.querySelector(".modal__image-caption"),h.querySelector(".modal__close"),document.querySelector("#confirm-delete-modal").querySelector("#confirm-delete-submit"),document.querySelector("#avatar-edit-modal")),p=(document.querySelector("#card-template").content.firstElementChild,new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then(this._checkResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.url})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}loadPageContent(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f34fc940-6444-4c84-9643-915e876889fb","Content-Type":"application/json"}}));let E;p.getInitialCards().then((e=>{E=new i({items:e,renderer:e=>{const t=L(e);E.addItem(t)}},".cards__list"),E.renderItems()})).catch((e=>{console.error(e)}));const v=new class{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setUserAvatar(e){this._avatarElement.src=e}}(".profile__title",".profile__description",".profile__image"),S=new s(e,n.querySelector(".modal__form_edit"));S.enableValidation(),new s(e,m.querySelector(".modal__form_avatar")).enableValidation();const b=new s(e,_.querySelector(".modal__form_add"));b.enableValidation();const f=new class extends r{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image-preview"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}("#image-preview-modal");function y(e,t){f.open(e,t)}function L(e){return new t(e,"#card-template",y,B,handleLikeClick).generateCard()}f.setEventListeners();const k=new o("#profile-edit-modal",(function(e){k.setLoading(!0),p.editProfileInfo(e).then((t=>{v.setUserInfo(e.title,e.description),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const C=new o("#profile-add-card-modal",(function(e){C.setLoading(!0),p.addCard(e).then((t=>{const s=L({name:e.title,link:e.url});E.addItem(s),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.setLoading(!1)}))}));C.setEventListeners();const g=new o("#avatar-edit-modal",(function(e){g.setLoading(!0),p.editProfilePicture(e.link).then((e=>{v.setUserAvatar(e.avatar),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.setLoading(!1)}))}));g.setEventListeners(),l.addEventListener("click",(()=>{S.resetValidation();const e=v.getUserInfo();d.value=e.name,c.value=e.job,k.open()})),u.addEventListener("click",(()=>{C.open(),b.resetValidation()})),a.addEventListener("click",(()=>{g.open()}));const q=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleFormSubmit=e}setLoading(){isLoading?this._submitButton.textContent="Deleting...":this._submitButton.textContent=this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{this._handleFormSubmit()})),super.setEventListeners()}}("#confirm-delete-modal");function B(e){q.open(),q.setSubmitAction((()=>{p.deleteCard(e._id).then((()=>{e.handleDeleteClick(),q.close()})).catch((e=>{console.error(e)}))}))}q.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfVxyXG5dO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZVByZXZpZXdQaWN0dXJlLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrKSBcclxuICB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZFxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlUHJldmlld1BpY3R1cmUgPSBoYW5kbGVQcmV2aWV3UGljdHVyZTtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgfVxyXG4gIFxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIFxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlUHJldmlld1BpY3R1cmUodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcclxuICAgIH0pOyBcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcIi5jYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfSAgXHJcblxyXG4gIF91cGRhdGVMaWtlU3RhdHVzKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiLmNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIi5jYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDbGljaygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgICAgIFxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIFxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfSBcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyBcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApOyBcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgICAgXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyBcclxuICB9XHJcblxyXG4gIFxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuXHJcbiAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZERhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9IFxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fCBcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKVxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICBcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpOyBcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfSBcclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtXHJcblxyXG4vL2luZGV4LmpzXHJcblxyXG4vLyBjb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCIsICgpID0+IHt9KTtcclxuLy8gbmV3Q2FyZFBvcHVwLm9wZW5cclxuXHJcblxyXG4vLyBuZXdDYXJkUG9wdXAuY2xvc2UoKSIsIi8vIEltcG9ydCBhbGwgdGhlIGNsYXNzZXNcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcblxyXG5cclxuLy8gUHJvZmlsZSBFZGl0XHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2VkaXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcblxyXG4vLyBBZGQgQ2FyZFxyXG5jb25zdCBwcm9maWxlQWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZENsb3NlQnV0dG9uID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fYWRkXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFRpdGxlSW5wdXQgPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRDYXJkVXJsSW5wdXQgPSBwcm9maWxlQWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCIpO1xyXG5cclxuLy8gUHJldmlldyBJbWFnZSBNb2RhbFxyXG5jb25zdCBpbWFnZVByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgbW9kYWxJbWFnZUVsZW1lbnQgPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xyXG5jb25zdCBtb2RhbENhcHRpb24gPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xyXG5jb25zdCBpbWFnZVByZXZpZXdDbG9zZUJ1dHRvbiA9IGltYWdlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5cclxuLy8gQ29uZmlybSBEZWxldGUgTW9kYWxcclxuY29uc3QgdHJhc2hJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKTtcclxuY29uc3QgdHJhc2hTdWJtaXRCdXR0b24gPSB0cmFzaEljb24ucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1zdWJtaXRcIilcclxuXHJcbi8vIEF2YXRhciBFZGl0IE1vZGFsXHJcbmNvbnN0IGF2YXRhckVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWVkaXQtbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcblxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZjM0ZmM5NDAtNjQ0NC00Yzg0LTk2NDMtOTE1ZTg3Njg4OWZiXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9XHJcbn0pOyBcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICBpdGVtczogcmVzLFxyXG4gICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xyXG4gICAgICB9LFxyXG4gICAgfSwgIFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuICApO1xyXG4gIFxyXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyBcclxuICB9KTtcclxuICBcclxuY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsIFwiLnByb2ZpbGVfX2ltYWdlXCIpOyAgXHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fZWRpdFwiKTsgIFxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWRpdEZvcm1FbGVtZW50KTsgIFxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7ICBcclxuXHJcbmNvbnN0IGF2YXRhckZvcm1FbGVtZW50ID0gYXZhdGFyRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fYXZhdGFyXCIpOyAgXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGF2YXRhckZvcm1FbGVtZW50KTsgIFxyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2FkZFwiKTsgIFxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWxlbWVudCk7ICBcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7ICBcclxuXHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1wcmV2aWV3LW1vZGFsXCIpOyAgXHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcmV2aWV3UGljdHVyZShuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSwgXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVQcmV2aWV3UGljdHVyZSxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KTsgIFxyXG5wcm9maWxlRWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gIC5lZGl0UHJvZmlsZUluZm8oaW5wdXRWYWx1ZXMpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzLnRpdGxlLCBpbnB1dFZhbHVlcy5kZXNjcmlwdGlvbik7XHJcbiAgICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gIH0pO1xyXG5cclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGVBZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCIsIGhhbmRsZVByb2ZpbGVBZGRDYXJkU3VibWl0KTsgIFxyXG5wcm9maWxlQWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlQWRkQ2FyZFN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIHByb2ZpbGVBZGRDYXJkUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IHJlbmRlckNhcmQoe25hbWU6IGlucHV0VmFsdWVzLnRpdGxlLCBsaW5rOiBpbnB1dFZhbHVlcy51cmwgfSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZERhdGEpO1xyXG4gICAgICBwcm9maWxlQWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcHJvZmlsZUFkZENhcmRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLWVkaXQtbW9kYWxcIiwgaGFuZGxlRWRpdEF2YXRhclN1Ym1pdCk7XHJcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdEF2YXRhclN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRQcm9maWxlUGljdHVyZShpbnB1dFZhbHVlcy5saW5rKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKVxyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgdXNlckluZm8gPSBwcm9maWxlVXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VySW5mby5qb2I7XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG4gIFxyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5wcm9maWxlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKTtcclxuY29uZmlybURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuICBjb25maXJtRGVsZXRlLm9wZW4oKTtcclxuICBjb25maXJtRGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7ICBcclxuICAgIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2xpY2soKTtcclxuICAgICAgY29uZmlybURlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XHJcbiAgICBpZiAoY2FyZC5pc0xpa2VkKSB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VDbGljaygpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcGlcclxuICAgICAgLnVubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VDbGljaygpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59ICAgICAgICAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuICBcclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBsb2FkVXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyx9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgZWRpdFByb2ZpbGVJbmZvKGNhcmREYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS50aXRsZSxcclxuICAgICAgICBhYm91dDogY2FyZERhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSAgXHJcbiAgfTtcclxuXHJcbiAgYWRkQ2FyZChpbnB1dFZhbHVlcykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcclxuICAgICAgICBsaW5rOiBpbnB1dFZhbHVlcy51cmwsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH07XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwgXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH07XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBlZGl0UHJvZmlsZVBpY3R1cmUobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpIFxyXG4gIH1cclxuXHJcbiAgbG9hZFBhZ2VDb250ZW50KCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmxvYWRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcbiAgXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSlcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH0gXHJcbn1cclxuXHJcbiAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSlcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9ICBcclxuXHJcbiAgc2V0TG9hZGluZygpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZVByZXZpZXdQaWN0dXJlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVQcmV2aWV3UGljdHVyZSIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl91cGRhdGVMaWtlU3RhdHVzIiwiYWRkIiwicmVtb3ZlIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJvcHRpb25zIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJkaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsIl9zdWJtaXRCdXR0b25UZXh0IiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlQWRkQ2FyZE1vZGFsIiwicHJvZmlsZUFkZENhcmRCdXR0b24iLCJpbWFnZVByZXZpZXdNb2RhbCIsImF2YXRhckVkaXRNb2RhbCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImxvYWRVc2VySW5mbyIsIm1ldGhvZCIsImVkaXRQcm9maWxlSW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJhYm91dCIsImRlc2NyaXB0aW9uIiwiYWRkQ2FyZCIsInVybCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJlZGl0UHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJsb2FkUGFnZUNvbnRlbnQiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwiY2FyZFNlY3Rpb24iLCJjYXJkRWwiLCJyZW5kZXJDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJDYXJkIiwicHJvZmlsZUVkaXRGb3JtUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZmluYWxseSIsInByb2ZpbGVBZGRDYXJkUG9wdXAiLCJhdmF0YXJFZGl0UG9wdXAiLCJ1c2VySW5mbyIsImNvbmZpcm1EZWxldGUiLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==