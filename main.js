!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handlePreviewPicture=s,this._handleDeleteClick=i,this._handleLikeClick=r}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handlePreviewPicture(this._name,this._link)})),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)}))}handleLikeClick(){this._likeButton.classList.toggle("card__like-button_active")}updateLikeStatus(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleDeleteClick(){this._element.remove(),this._element=null}generateCard(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._cardTitleEl=this._element.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button"),this._setEventListeners(),this._element}},s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class i{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close"))&&this.close()}))}}var n=class extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}};const o=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-avatar-button"),c=(o.querySelector(".modal__close"),o.querySelector(".modal__form_edit"),document.querySelector("#profile-description-input")),d=document.querySelector("#profile-title-input"),_=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-add-card-modal")),u=document.querySelector("#profile-add-button"),h=(_.querySelector(".modal__close"),_.querySelector(".modal__form_add"),_.querySelector(".modal__input_type_title"),_.querySelector(".modal__input_type_url"),document.querySelector("#image-preview-modal")),m=(h.querySelector(".modal__image-preview"),h.querySelector(".modal__image-caption"),h.querySelector(".modal__close"),document.querySelector("#confirm-delete-modal").querySelector("#confirm-delete-submit"),document.querySelector("#avatar-edit-modal")),p=(document.querySelector("#card-template").content.firstElementChild,new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}editProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then(this._checkResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}loadPageContent(){return Promise.all([this.loadUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f34fc940-6444-4c84-9643-915e876889fb","Content-Type":"application/json"}}));let E;p.getInitialCards().then((e=>{E=new i({items:e,renderer:e=>{const s=function(e){return new t(e,"#card-template",y,q,B).generateCard()}(e);E.addItem(s)}},".cards__list"),E.renderItems()})).catch((e=>{console.error(e)}));const v=new class{constructor(e,t,s){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e,t,s){this._nameElement.textContent=e,this._jobElement.textContent=t,this._avatarElement.textContent=s}setUserAvatar(e){this._avatarElement.src=e}}(".profile__title",".profile__description",".profile__image"),S=new s(e,o.querySelector(".modal__form_edit"));S.enableValidation(),new s(e,m.querySelector(".modal__form_avatar")).enableValidation();const b=new s(e,_.querySelector(".modal__form_add"));b.enableValidation();const f=new class extends r{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__image-preview"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}("#image-preview-modal");function y(e,t){f.open(e,t)}f.setEventListeners();const k=new n("#profile-edit-modal",(function(e){k.setLoading(!0),p.editProfileInfo(e).then((t=>{v.setUserInfo(e.title,e.description),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const L=new n("#profile-add-card-modal",(function(e){L.setLoading(!0),p.addCard(e).then((e=>{E.addItem(cardData),L.close()})).catch((e=>{console.error(e)})).finally((()=>{L.setLoading(!1)}))}));L.setEventListeners();const C=new n("#avatar-edit-modal",(function(e){C.setLoading(!0),p.editProfilePicture(e.link).then((e=>{v.setUserAvatar(e.avatar),C.close()})).catch((e=>{console.error(e)})).finally((()=>{C.setLoading(!1)}))}));C.setEventListeners(),l.addEventListener("click",(()=>{S.resetValidation();const e=v.getUserInfo();d.value=e.name,c.value=e.job,k.open()})),u.addEventListener("click",(()=>{L.open(),b.resetValidation()})),a.addEventListener("click",(()=>{C.open()}));const g=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button")}setSubmitAction(e){this._handleFormSubmit=e}setLoading(){isLoading?this._submitButton.textContent="Deleting...":this._submitButton.textContent=this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{this._handleFormSubmit()})),super.setEventListeners()}}("#confirm-delete-modal");function q(e){g.open(),g.setSubmitAction((()=>{p.deleteCard(e._id).then((()=>{e.handleDeleteClick(),g.close()})).catch((e=>{console.error(e)}))}))}function B(e){e.isLiked?p.unlikeCard(e._id).then((t=>{e.handleLikeClick()})).catch((e=>{console.error(e)})):p.likeCard(e._id).then((t=>{e.handleLikeClick()})).catch((e=>{console.error(e)}))}g.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hCeUgsTUFBTVIsSUFDTDZELEVBQUtwTCxpQkFBaUIsSUFFdkJ1SixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBZnBCdkMsRUFDQzJCLFNBQVN3QyxFQUFLOUssS0FDZHlILE1BQU1SLElBQ0w2RCxFQUFLcEwsaUJBQWlCLElBRXZCdUosT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHQVl4QixDQXZDQTBCLEVBQWMxRixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9XHJcbl07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCJcclxufTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlUHJldmlld1BpY3R1cmUsIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2spIFxyXG4gIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGNhcmREYXRhLl9pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBjYXJkRGF0YS5pc0xpa2VkXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSA9IGhhbmRsZVByZXZpZXdQaWN0dXJlO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcbiAgXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlrZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH0gIFxyXG5cclxuICB1cGRhdGVMaWtlU3RhdHVzKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG4gIFxyXG4gICAgICBcclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIFxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIFxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICBcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH0gXHJcbiAgICBcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsgXHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTsgXHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTsgXHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gXHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgIFxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgfVxyXG5cclxuICBcclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgXHJcblxyXG4gIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGNhcmREYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfSBcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHwgXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KVxyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIilcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTsgXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH0gXHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybVxyXG5cclxuLy9pbmRleC5qc1xyXG5cclxuLy8gY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiLCAoKSA9PiB7fSk7XHJcbi8vIG5ld0NhcmRQb3B1cC5vcGVuXHJcblxyXG5cclxuLy8gbmV3Q2FyZFBvcHVwLmNsb3NlKCkiLCIvLyBJbXBvcnQgYWxsIHRoZSBjbGFzc2VzXHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5cclxuXHJcbi8vIFByb2ZpbGUgRWRpdFxyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG5cclxuLy8gQWRkIENhcmRcclxuY29uc3QgcHJvZmlsZUFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRDbG9zZUJ1dHRvbiA9IHByb2ZpbGVBZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2FkZFwiKTtcclxuY29uc3QgcHJvZmlsZUFkZENhcmRUaXRsZUlucHV0ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFVybElucHV0ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcclxuXHJcbi8vIFByZXZpZXcgSW1hZ2UgTW9kYWxcclxuY29uc3QgaW1hZ2VQcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7XHJcbmNvbnN0IG1vZGFsSW1hZ2VFbGVtZW50ID0gaW1hZ2VQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcclxuY29uc3QgbW9kYWxDYXB0aW9uID0gaW1hZ2VQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuY29uc3QgaW1hZ2VQcmV2aWV3Q2xvc2VCdXR0b24gPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbi8vIENvbmZpcm0gRGVsZXRlIE1vZGFsXHJcbmNvbnN0IHRyYXNoSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtbW9kYWxcIik7XHJcbmNvbnN0IHRyYXNoU3VibWl0QnV0dG9uID0gdHJhc2hJY29uLnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtc3VibWl0XCIpXHJcblxyXG4vLyBBdmF0YXIgRWRpdCBNb2RhbFxyXG5jb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIpO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImYzNGZjOTQwLTY0NDQtNGM4NC05NjQzLTkxNWU4NzY4ODlmYlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfVxyXG59KTsgXHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgaXRlbXM6IHJlcyxcclxuICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcclxuICAgICAgfSxcclxuICAgIH0sICBcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbiAgKTtcclxuICBcclxuICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgXHJcbiAgfSk7XHJcbiAgXHJcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLCBcIi5wcm9maWxlX19pbWFnZVwiKTsgIFxyXG5cclxuXHJcblxyXG5cclxuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2VkaXRcIik7ICBcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWxlbWVudCk7ICBcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAgXHJcblxyXG5jb25zdCBhdmF0YXJGb3JtRWxlbWVudCA9IGF2YXRhckVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtX2F2YXRhclwiKTsgIFxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhdmF0YXJGb3JtRWxlbWVudCk7ICBcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtRWxlbWVudCA9IHByb2ZpbGVBZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV9hZGRcIik7ICBcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpOyAgXHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAgXHJcblxyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTsgIFxyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJldmlld1BpY3R1cmUobmFtZSwgbGluaykge1xyXG4gIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsIFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlUHJldmlld1BpY3R1cmUsXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7ICBcclxucHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAuZWRpdFByb2ZpbGVJbmZvKGlucHV0VmFsdWVzKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xyXG4gICAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICB9KTtcclxuXHJcbn07XHJcblxyXG5jb25zdCBwcm9maWxlQWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVQcm9maWxlQWRkQ2FyZFN1Ym1pdCk7ICBcclxucHJvZmlsZUFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUFkZENhcmRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBwcm9maWxlQWRkQ2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgLy8gY29uc3QgY2FyZERhdGEgPSByZW5kZXJDYXJkKHtuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSwgbGluazogaW5wdXRWYWx1ZXMudXJsIH0pO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmREYXRhKTtcclxuICAgICAgcHJvZmlsZUFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVBZGRDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsIGhhbmRsZUVkaXRBdmF0YXJTdWJtaXQpO1xyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRBdmF0YXJTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0UHJvZmlsZVBpY3R1cmUoaW5wdXRWYWx1ZXMubGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcilcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKClcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mby5uYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckluZm8uam9iO1xyXG4gIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLm9wZW4oKTtcclxuICBcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVBZGRDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgY29uZmlybURlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjY29uZmlybS1kZWxldGUtbW9kYWxcIik7XHJcbmNvbmZpcm1EZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XHJcbiAgY29uZmlybURlbGV0ZS5vcGVuKCk7XHJcbiAgY29uZmlybURlbGV0ZS5zZXRTdWJtaXRBY3Rpb24oKCkgPT4geyAgXHJcbiAgICBhcGlcclxuICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmhhbmRsZURlbGV0ZUNsaWNrKCk7XHJcbiAgICAgIGNvbmZpcm1EZWxldGUuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBpZiAoIWNhcmQuaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaVxyXG4gICAgLnVubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59ICAgICAgICAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuICBcclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBsb2FkVXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyx9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgZWRpdFByb2ZpbGVJbmZvKGNhcmREYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS50aXRsZSxcclxuICAgICAgICBhYm91dDogY2FyZERhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSAgXHJcbiAgfTtcclxuXHJcbiAgYWRkQ2FyZChjYXJkRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssIFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIFxyXG4gICAge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9O1xyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgdW5saWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgfTtcclxuXHJcbiAgZWRpdFByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCBcclxuICAgIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKSBcclxuICB9XHJcblxyXG4gIGxvYWRQYWdlQ29udGVudCgpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5sb2FkVXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxuXHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iLCBhdmF0YXIpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnRleHRDb250ZW50ID0gYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihsaW5rKSB7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSlcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH0gXHJcbn1cclxuXHJcbiAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSlcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9ICBcclxuXHJcbiAgc2V0TG9hZGluZygpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZVByZXZpZXdQaWN0dXJlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVQcmV2aWV3UGljdHVyZSIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ1cGRhdGVMaWtlU3RhdHVzIiwiYWRkIiwicmVtb3ZlIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJvcHRpb25zIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJkaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsIl9zdWJtaXRCdXR0b25UZXh0IiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlQWRkQ2FyZE1vZGFsIiwicHJvZmlsZUFkZENhcmRCdXR0b24iLCJpbWFnZVByZXZpZXdNb2RhbCIsImF2YXRhckVkaXRNb2RhbCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImxvYWRVc2VySW5mbyIsIm1ldGhvZCIsImVkaXRQcm9maWxlSW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJhYm91dCIsImRlc2NyaXB0aW9uIiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJlZGl0UHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJsb2FkUGFnZUNvbnRlbnQiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwiY2FyZFNlY3Rpb24iLCJjYXJkRWwiLCJDYXJkIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicHJvZmlsZVVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9jYXB0aW9uIiwicHJvZmlsZUVkaXRGb3JtUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZmluYWxseSIsInByb2ZpbGVBZGRDYXJkUG9wdXAiLCJhdmF0YXJFZGl0UG9wdXAiLCJ1c2VySW5mbyIsImNvbmZpcm1EZWxldGUiLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==